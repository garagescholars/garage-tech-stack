<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garage Scholars Denver - Contact</title>
    <meta property="og:title" content="Garage Scholars Denver - Contact">
    <meta name="description" content="Contact Garage Scholars Denver for a free garage transformation consultation.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"></noscript>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- ========== HEADER ========== -->
    <header class="header">
        <div class="header-inner">
            <div class="logo"><a href="index.html">Garage Scholars</a></div>
            <nav class="nav-links">
                <a href="index.html">Home</a>
                <a href="about.html">About</a>
                <a href="index.html#services">Services</a>
                <a href="index.html#pricing">Pricing</a>
                <a href="contact.html" class="active">Contact</a>
                <a href="apply.html">Join Our Team</a>
            </nav>
            <div class="nav-buttons">
                <a href="coming-soon.html" class="btn btn-outline">Visualize Your Garage</a>
                <button class="btn btn-primary" onclick="openQuoteModal()">Get a Quote</button>
            </div>
            <button class="hamburger" onclick="toggleMobileNav()" aria-label="Menu">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
    </header>

    <nav class="mobile-nav" id="mobileNav">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="index.html#services">Services</a>
        <a href="index.html#pricing">Pricing</a>
        <a href="contact.html">Contact</a>
        <a href="apply.html">Join Our Team</a>
        <a href="coming-soon.html" class="btn btn-outline">Visualize Your Garage</a>
        <button class="btn btn-primary" onclick="openQuoteModal()">Get a Quote</button>
    </nav>

    <!-- ========== CONTACT SECTION ========== -->
    <div class="contact-section">
        <div class="contact-form-wrapper">
            <h2>Contact us</h2>
            <p class="subtitle">Our friendly team would love to hear from you.</p>
            <form id="contactForm" onsubmit="handleContactForm(event)">
                <div class="form-group">
                    <label for="contact-name">Name</label>
                    <input type="text" id="contact-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="contact-email">Email</label>
                    <input type="email" id="contact-email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="contact-message">Message</label>
                    <textarea id="contact-message" name="message" rows="5" placeholder="Type your message..." required></textarea>
                </div>
                <div class="form-checkbox">
                    <input type="checkbox" id="contact-terms" required>
                    <label for="contact-terms">I accept the <a href="termsofuse.html" style="color: var(--color-primary);">Terms of Use</a></label>
                </div>
                <button type="submit" class="btn btn-primary btn-lg" style="width: 100%;">Submit</button>
            </form>
        </div>
        <div class="contact-map">
            <iframe src="https://www.google.com/maps/embed/v1/place?key=AIzaSyAOVYRIgupAurZup5y1PRh8Ismb1A3lLao&q=Hampden+Avenue+and+Colorado+Boulevard+Denver+CO&zoom=14&maptype=roadmap" loading="lazy" allowfullscreen></iframe>
        </div>
    </div>

    <!-- ========== FOOTER ========== -->
    <footer class="footer">
        <div class="footer-top">
            <div class="newsletter">
                <h3>Join our newsletter</h3>
                <p>Sign up for our newsletter to receive exclusive deals, service updates, and garage organization tips. Stay informed!</p>
                <form class="newsletter-form" onsubmit="handleNewsletter(event)">
                    <input type="email" placeholder="Enter your email" required>
                    <button type="submit" class="btn btn-primary">Subscribe</button>
                </form>
                <p class="newsletter-disclaimer">By subscribing you agree to our <a href="privacypolicy.html">Privacy Policy</a></p>
            </div>
            <div class="footer-links">
                <div class="footer-column">
                    <h4>Menu</h4>
                    <a href="index.html">Home</a>
                    <a href="about.html">About</a>
                    <a href="index.html#services">Services</a>
                    <a href="contact.html">Contact</a>
                    <a href="apply.html">Join Our Team</a>
                </div>
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <a href="index.html#pricing">Pricing</a>
                    <a href="privacypolicy.html">Privacy Policy</a>
                    <a href="termsofuse.html">Terms of Use</a>
                </div>
                <div class="footer-column">
                    <h4>Company</h4>
                    <a href="tel:7205073969">(720) 507-3969</a>
                    <a href="mailto:garagescholars@gmail.com">garagescholars@gmail.com</a>
                    <span style="color: var(--color-text-muted); font-size: 0.9rem;">Serving the Denver Metro Area</span>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <span class="logo">Garage Scholars</span>
            <p>&copy; 2025 Garage Scholars. All rights reserved.</p>
        </div>
    </footer>

    <!-- ========== QUOTE MODAL ========== -->
    <div class="modal-overlay" id="quoteModal">
        <div class="modal">
            <button class="modal-close" onclick="closeQuoteModal()">&times;</button>
            <h2>Get Your Free Quote</h2>
            <p class="subtitle">Tell us about your garage and we'll get back to you within 24 hours.</p>
            <form id="quoteForm">
                <div class="form-row">
                    <div class="form-group"><label>Name *</label><input type="text" name="name" required></div>
                    <div class="form-group"><label>Email *</label><input type="email" name="email" required></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>Phone *</label><input type="tel" name="phone" required></div>
                    <div class="form-group"><label>Zip Code *</label><input type="text" name="zipcode" required></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>Service Type *</label><select name="serviceType" required><option value="">Select</option><option value="cleaning">Cleaning</option><option value="organization">Organization</option><option value="gym">Gym Setup</option><option value="resale">Resale</option><option value="full">Full Transformation</option></select></div>
                    <div class="form-group"><label>Package</label><select id="quote-package" name="package"><option value="">Select</option><option value="undergraduate">Undergraduate</option><option value="graduate">Graduate</option><option value="doctorate">Doctorate</option></select></div>
                </div>
                <div class="form-group"><label>Garage Size</label><input type="text" name="garageSize" placeholder="e.g., 2-car garage"></div>
                <div class="form-group"><label>Description</label><textarea name="description" rows="3" placeholder="Tell us about your garage..."></textarea></div>
                <div class="form-group"><label>Photos * (min 3)</label><input type="file" name="photos" multiple accept="image/*" style="padding:10px;"></div>
                <button type="submit" class="btn btn-primary btn-lg" style="width:100%;">Submit Quote Request</button>
                <div class="form-message" id="formMessage"></div>
            </form>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-functions-compat.js"></script>
    <script src="/firebase-config.js"></script>

    <script>
        function toggleMobileNav() { document.getElementById('mobileNav').classList.toggle('open'); }
        document.querySelectorAll('#mobileNav a').forEach(function(link) { link.addEventListener('click', function() { document.getElementById('mobileNav').classList.remove('open'); }); });

        firebase.initializeApp(window.firebaseConfig);
        const functions = firebase.functions();
        const db = firebase.firestore();

        function openQuoteModal(packageType) {
            document.getElementById('quoteModal').classList.add('open');
            document.body.style.overflow = 'hidden';
            if (packageType) { const pkg = document.getElementById('quote-package'); if (pkg) pkg.value = packageType; }
        }
        function closeQuoteModal() {
            document.getElementById('quoteModal').classList.remove('open');
            document.body.style.overflow = 'auto';
            document.getElementById('quoteForm').reset();
            const msg = document.getElementById('formMessage'); msg.textContent = ''; msg.className = 'form-message'; msg.style.display = '';
        }
        document.getElementById('quoteModal').addEventListener('click', function(e) { if (e.target === this) closeQuoteModal(); });

        // Resize an image file to max 1200px and return compressed base64
        function resizePhoto(file, maxDim, quality) {
            return new Promise(function(resolve, reject) {
                var img = new Image();
                var objectUrl = URL.createObjectURL(file);
                img.onload = function() {
                    URL.revokeObjectURL(objectUrl);
                    var w = img.width, h = img.height;
                    if (w > maxDim || h > maxDim) {
                        if (w > h) { h = Math.round(h * maxDim / w); w = maxDim; }
                        else { w = Math.round(w * maxDim / h); h = maxDim; }
                    }
                    var canvas = document.createElement('canvas');
                    canvas.width = w; canvas.height = h;
                    canvas.getContext('2d').drawImage(img, 0, 0, w, h);
                    var dataUrl = canvas.toDataURL('image/jpeg', quality);
                    resolve(dataUrl.split(',')[1]);
                };
                img.onerror = function() { URL.revokeObjectURL(objectUrl); reject(); };
                img.src = objectUrl;
            });
        }

        document.getElementById('quoteForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const msg = document.getElementById('formMessage');
            const btn = this.querySelector('button[type="submit"]');
            btn.disabled = true; btn.textContent = 'Submitting...';
            try {
                const fd = new FormData(this);
                const data = { name: fd.get('name'), email: fd.get('email'), phone: fd.get('phone'), zipcode: fd.get('zipcode'), serviceType: fd.get('serviceType'), package: fd.get('package'), garageSize: fd.get('garageSize') || '', description: fd.get('description') || '', photoData: [] };
                const photos = fd.getAll('photos').filter(f => f.size > 0);
                if (!photos || photos.length < 3) { msg.textContent = 'Please upload at least 3 photos.'; msg.className = 'form-message error'; btn.disabled = false; btn.textContent = 'Submit Quote Request'; return; }
                msg.textContent = 'Processing photos...'; msg.className = 'form-message'; msg.style.display = 'block';
                for (const file of photos) {
                    var base64 = await resizePhoto(file, 1200, 0.7);
                    data.photoData.push({ base64: base64, filename: file.name, mimeType: 'image/jpeg' });
                }
                msg.textContent = 'Submitting...';
                await functions.httpsCallable('submitQuoteRequest')(data);
                msg.textContent = 'Thank you! We\'ll contact you soon.'; msg.className = 'form-message success';
                setTimeout(() => closeQuoteModal(), 3000);
            } catch (error) { msg.textContent = error.message || 'Error. Please try again.'; msg.className = 'form-message error'; }
            finally { btn.disabled = false; btn.textContent = 'Submit Quote Request'; }
        });

        function handleContactForm(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button[type="submit"]');
            btn.disabled = true; btn.textContent = 'Sending...';
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const message = document.getElementById('contact-message').value;
            db.collection('contactSubmissions').add({ name, email, message, submittedAt: firebase.firestore.FieldValue.serverTimestamp() })
                .then(() => { btn.textContent = 'Sent!'; btn.style.background = 'var(--color-primary-dark)'; e.target.reset(); setTimeout(() => { btn.textContent = 'Submit'; btn.style.background = ''; btn.disabled = false; }, 3000); })
                .catch(err => { console.error(err); btn.textContent = 'Error - Try Again'; btn.style.background = '#c0392b'; setTimeout(() => { btn.textContent = 'Submit'; btn.style.background = ''; btn.disabled = false; }, 3000); });
        }

        function handleNewsletter(e) {
            e.preventDefault();
            const form = e.target;
            const email = form.querySelector('input[type="email"]').value;
            const btn = form.querySelector('button[type="submit"]');
            btn.disabled = true; btn.textContent = 'Subscribing...';
            db.collection('newsletterSubscriptions').add({ email, subscribedAt: firebase.firestore.FieldValue.serverTimestamp() })
                .then(() => { form.querySelector('input[type="email"]').value = ''; btn.textContent = 'Subscribed!'; btn.style.background = 'var(--color-primary-dark)'; setTimeout(() => { btn.textContent = 'Subscribe'; btn.style.background = ''; btn.disabled = false; }, 3000); })
                .catch(err => { console.error(err); btn.textContent = 'Error - Try Again'; btn.style.background = '#c0392b'; setTimeout(() => { btn.textContent = 'Subscribe'; btn.style.background = ''; btn.disabled = false; }, 3000); });
        }
    </script>

</body>
</html>
